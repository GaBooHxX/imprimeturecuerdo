:root{
  --bg:#06070a;
  --text:#eef1f7;
  --muted:#aab3c2;
  --line:rgba(255,255,255,.10);
  --gold:#d6b26b;

  --card: rgba(255,255,255,.03);
  --card2: rgba(255,255,255,.04);

  --radius: 18px;
  --radius-sm: 14px;

  --shadow: 0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  font-family: system-ui, "Segoe UI", Roboto, Arial;
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
[hidden]{display:none !important;}

/* ============ Layout ============ */
.mWrap{
  max-width: 980px;
  margin: auto;
  padding: 18px;
}

@media (max-width: 520px){
  .mWrap{ padding: 14px; }
}

/* ============ Top bar ============ */
.mTop{
  position: sticky;
  top: 0;
  z-index: 50;
  background: rgba(6,7,10,.86);
  border-bottom: 1px solid var(--line);
  backdrop-filter: blur(12px);
}

.mTop .mWrap{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  padding-top: 12px;
  padding-bottom: 12px;
}

.mBack{
  padding: 8px 12px;
  border: 1px solid var(--line);
  border-radius: 999px;
  background: rgba(255,255,255,.04);
  transition: background .2s ease, transform .2s ease;
}
.mBack:hover{ background: rgba(255,255,255,.08); }
.mBack:active{ transform: scale(.99); }

/* ============ Cover ============ */
.mCoverWrap{
  position: relative;
  width: 100%;
  height: clamp(260px, 52vh, 520px);
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.10);
  background: #000;
  box-shadow: var(--shadow);
}

.mCoverBg{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(18px);
  transform: scale(1.15);
  opacity: .55;
}

.mCover{
  position: relative;
  z-index: 1;
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
}

/* ============ Title ============ */
.mName{
  font-size: clamp(28px, 4.4vw, 40px);
  margin: 16px 0 6px;
  letter-spacing: -.4px;
  font-weight: 850;
  line-height: 1.05;
}

.mDates{
  margin:0;
  color: var(--muted);
  letter-spacing: .6px;
  text-transform: uppercase;
  font-size: 12px;
  opacity: .9;
}

.mBio{
  border-left: 3px solid var(--gold);
  padding-left: 12px;
  margin-top: 12px;
  color: rgba(238,241,247,.92);
  line-height: 1.6;
}

/* ============ Sections ============ */
.mSection{
  margin-top: 16px;
  padding: 16px;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  background: var(--card);
  box-shadow: 0 0 0 rgba(0,0,0,0);
}

.mSection h2{
  margin: 0 0 10px;
  font-size: 18px;
  letter-spacing: -.2px;
}

.meta{
  color: rgba(238,241,247,.72);
  font-size: 13px;
  line-height: 1.45;
}

/* Animación suave */
@media (prefers-reduced-motion: no-preference){
  .mSection, .mCoverWrap, .mGallery{
    animation: fadeInUp .35s ease both;
  }
}
@keyframes fadeInUp{
  from{ opacity: 0; transform: translateY(6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* ============ Divider ============ */
.mDivider{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  margin: 12px 0 6px;
  opacity:.9;
}
.mDivider::before,
.mDivider::after{
  content:"";
  height:1px;
  flex:1;
  background: linear-gradient(90deg, transparent, rgba(214,178,107,.35), transparent);
}
.mDivider span{
  color: rgba(214,178,107,.95);
  font-size: 14px;
}

/* ============ Auth UI ============ */
.authRow{display:flex; gap:10px; align-items:center; flex-wrap:wrap}

.authStatus{
  color: rgba(238,241,247,.85);
  font-size: 13px;
  padding: 8px 10px;
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 999px;
  background: rgba(255,255,255,.03);
}

.authError{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255,80,80,.30);
  background: rgba(255,80,80,.10);
  color: rgba(255,220,220,.95);
  font-size: 13px;
}

.gBtn{
  display:inline-flex;
  align-items:center;
  gap:10px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.07);
  color: rgba(238,241,247,.94);
  padding: 10px 14px;
  border-radius: 999px;
  cursor:pointer;
  font-weight: 750;
  transition: background .2s ease, transform .2s ease;
}
.gBtn:hover{ background: rgba(255,255,255,.10); }
.gBtn:active{ transform: scale(.99); }
.gBtn.ghost{ background: transparent; }

.gIcon{
  width:18px; height:18px; border-radius:4px;
  background:#fff; position:relative; flex:0 0 18px;
}
.gIcon::after{
  content:"G";
  position:absolute; inset:0;
  display:grid; place-items:center;
  font-weight:900; color:#1a73e8; font-size:12px;
}

/* ============ Stats ============ */
.mStats{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:10px;
  margin-top: 12px;
}
@media (max-width: 520px){
  .mStats{ grid-template-columns: 1fr; }
}

.mStat{
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  border-radius: var(--radius);
  padding: 12px;
}
.mStat .k{
  font-size: 12px;
  opacity: .75;
  margin: 0 0 6px;
}
.mStat .v{
  font-size: 20px;
  font-weight: 850;
  letter-spacing: -.2px;
  margin: 0;
}
.mStat .s{
  font-size: 12px;
  opacity: .75;
  margin: 6px 0 0;
}

/* ============ Gallery PRO ============ */
/* clave: grid fluido + aspect-ratio */
.mGallery{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

@media (max-width: 920px){
  .mGallery{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 520px){
  .mGallery{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 380px){
  .mGallery{ grid-template-columns: 1fr; }
}

/* BOTÓN thumb */
.mThumbBtn{
  padding:0;
  border:0;
  background:transparent;
  cursor:pointer;
  border-radius: var(--radius);
  display:block;
  width:100%;
  -webkit-tap-highlight-color: transparent;
}

/* ESTE ERA EL FALTANTE: mThumbWrap */
.mThumbWrap{
  position: relative;
  width: 100%;
  aspect-ratio: 4 / 3; /* tamaño elegante, no gigante */
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.02);
  box-shadow: 0 10px 25px rgba(0,0,0,.25);
  transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease;
}

.mThumbBtn:hover .mThumbWrap{
  transform: translateY(-2px);
  border-color: rgba(214,178,107,.28);
  box-shadow: 0 14px 34px rgba(0,0,0,.35);
}

.mThumb{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Caption elegante */
.mCap{
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 10px;
  padding: 8px 10px;
  border-radius: 12px;
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.10);
  color: rgba(238,241,247,.92);
  font-size: 12px;
  line-height: 1.2;
  backdrop-filter: blur(10px);
}

/* ============ Video ============ */
.mVideo{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  border-radius: var(--radius);
  overflow:hidden;
  border:1px solid var(--line);
  background: rgba(255,255,255,.03);
  box-shadow: var(--shadow);
}
.mVideo iframe{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:0;
}

/* ============ Candle button ============ */
.mCandleBtn{
  font-size: 16px;
  padding: 12px 16px;
  border-radius: 999px;
  border: 1px solid rgba(214,178,107,.45);
  background: rgba(214,178,107,.14);
  cursor: pointer;
  transition: all .25s ease;
  box-shadow: 0 0 0 rgba(214,178,107,0);
}
.mCandleBtn:hover{
  box-shadow: 0 0 28px rgba(214,178,107,.25);
  transform: scale(1.02);
}
.mCandleBtn:disabled{
  opacity: .6;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Partículas */
.cSpark{
  position: relative;
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:50%;
  background: rgba(214,178,107,.85);
  filter: blur(.2px);
  animation: spark var(--d) ease-out forwards;
  pointer-events:none;
}
@keyframes spark{
  from{ transform: translate(0,0) scale(1); opacity: 1; }
  to{ transform: translate(var(--dx), var(--dy)) scale(.2); opacity: 0; }
}

/* ============ LIGHTBOX ============ */
.lb{
  position:fixed;
  inset:0;
  z-index:9999;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
  background: rgba(0,0,0,.78);
}

.lb__close{
  position:fixed;
  top:14px;
  right:14px;
  width:44px;
  height:44px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: rgba(238,241,247,.92);
  font-size:26px;
  cursor:pointer;
  z-index:10000;
}

.lb__wrap{
  width: min(1100px, 96vw);
  max-height: 86vh;
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 14px;
  align-items: stretch;
}

@media (max-width: 900px){
  .lb__wrap{ grid-template-columns: 1fr; max-height:none; }
  .lb{ align-items:flex-start; overflow:auto; }
}

.lb__img{
  width:100%;
  height:100%;
  max-height:86vh;
  object-fit:contain;
  border-radius: var(--radius);
  background: rgba(255,255,255,.02);
  border:1px solid rgba(255,255,255,.10);
}

.lb__panel{
  border:1px solid rgba(255,255,255,.12);
  border-radius: var(--radius);
  background: rgba(255,255,255,.04);
  padding:12px;
  overflow:auto;
}

.lb__auth{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  padding-bottom:10px;
  border-bottom:1px solid rgba(255,255,255,.10);
}

.lb__user{color: rgba(238,241,247,.85); font-size: 13px}

.lb__btn{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: rgba(238,241,247,.92);
  padding:9px 12px;
  border-radius: 14px;
  cursor:pointer;
  font-weight: 800;
}
.lb__btn.ghost{background:transparent}
.lb__btn.primary{
  border:1px solid rgba(214,178,107,.35);
  background: rgba(214,178,107,.14);
}

.lb__reactions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:12px 0;
}

.rBtn{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: rgba(238,241,247,.92);
  padding:10px 12px;
  border-radius: 14px;
  cursor:pointer;
  font-weight: 800;
}

.rBtn[disabled], .lb__btn[disabled]{opacity:.55; cursor:not-allowed}

.lb__commentBox{display:grid; gap:8px}

.lb__text{
  width:100%;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  color: rgba(238,241,247,.92);
  border-radius: 14px;
  padding:10px 12px;
  outline:none;
  min-height:90px;
  resize:vertical;
}

.lb__hint{color: rgba(238,241,247,.70); font-size: 12px}

.lb__comments{margin-top:12px; display:grid; gap:10px}

.cItem{
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  border-radius: 14px;
  padding:10px 12px;
}
.cMeta{color: rgba(238,241,247,.70); font-size: 12px; margin-top: 6px}
